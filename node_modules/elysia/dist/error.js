import{Value as r}from"@sinclair/typebox/value";// ? Cloudflare worker support
let e="undefined"!=typeof Bun?Bun.env:"undefined"!=typeof process?process?.env:void 0;export const ERROR_CODE=Symbol("ErrorCode");export const isProduction=(e?.NODE_ENV??e?.ENV)==="production";export class InternalServerError extends Error{code="INTERNAL_SERVER_ERROR";status=500;constructor(r){super(r??"INTERNAL_SERVER_ERROR")}}export class NotFoundError extends Error{code="NOT_FOUND";status=404;constructor(r){super(r??"NOT_FOUND")}}export class ParseError extends Error{code="PARSE";status=400;constructor(r){super(r??"PARSE")}}export class InvalidCookieSignature extends Error{key;code;status;constructor(r,e){super(e??`"${r}" has invalid cookie signature`),this.key=r,this.code="INVALID_COOKIE_SIGNATURE",this.status=400}}export class ValidationError extends Error{type;validator;value;code;status;constructor(e,t,s){let o=isProduction?void 0:t.Errors(s).First(),a=o?.schema.error?"function"==typeof o.schema.error?o.schema.error(e,t,s):o.schema.error:void 0,i=isProduction?a??`Invalid ${e??o?.schema.error??o?.message}`:a??`Invalid ${e}, '${o?.path?.slice(1)||"type"}': ${o?.message}

Expected: `+// @ts-ignore
JSON.stringify(r.Create(t.schema),null,2)+"\n\nFound: "+JSON.stringify(s,null,2);// +
// '\n\n' +
// 'Schema: ' +
// // @ts-ignore
// JSON.stringify(validator.schema, null, 2) +
// '\n'
super(i),this.type=e,this.validator=t,this.value=s,this.code="VALIDATION",this.status=400,Object.setPrototypeOf(this,ValidationError.prototype)}get all(){return[...this.validator.Errors(this.value)]}get model(){// @ts-ignore
return r.Create(this.validator.schema)}toResponse(r){return new Response(this.message,{status:400,headers:r})}}